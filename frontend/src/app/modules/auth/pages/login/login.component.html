<main class="login-wrapper d-flex justify-content-center align-items-center vh-100 bg-principal">
  <p-card
    header="Iniciar sesión"
    subheader="Completa los siguientes campos para entrar en tu cuenta"
    class="col-11 col-sm-8 col-md-5 col-lg-4 col-xl-3 bg-"
    styleClass="bg-secundario"
  >

    <form [formGroup]="form" class="col-12 d-flex flex-column gap-3 p-0">
      <div class="form-group">
        <label for="email" class="form-label">Correo</label>
        <input
          type="text"
          pInputText
          id="email"
          formControlName="email"
          class="form-control"
          placeholder="johndoe@mail.com"
        />
        @if (form.get("email")?.hasError("required") && form.get("email")?.touched) {
          <p class="text-danger mt-1">Este campo es requerido</p>
        }
        @if (form.get("email")?.hasError("email") && form.get("email")?.touched) {
          <p class="text-danger mt-1">Por favor, ingresa un correo válido</p>
        }
      </div>

      <div class="form-group d-flex flex-column">
        <label for="password">Contraseña</label>
        <p-password
          id="password"
          formControlName="password"
          [feedback]="false"
          [toggleMask]="true"
          placeholder="Contraseña"
          fluid
        ></p-password>
        @if (form.get("password")?.hasError("required") && form.get("password")?.touched) {
          <p class="text-danger mt-1">Este campo es requerido</p>
        }
      </div>

      @if (mensajeError) {
        <div class="field">
          <p-message severity="error" class="col-12">{{ mensajeError }}</p-message>
        </div>
      }

      @if (exito) {
        <div class="field">
          <p-message severity="success" class="col-12">Iniciaste sesión correctamente. Redirigiendo...</p-message>
        </div>
      }

      <button
        type="submit"
        [disabled]="enviando || form.invalid"
        (click)="login()"
        class="btn-primario"
      >
        {{ !enviando ? 'Iniciar sesión' : 'Cargando' }}
      </button>

      <div class="text-center">
        <a [routerLink]="'/cuenta/recuperar'" class="text-decoration-none fw-bold text-secundario">¿Olvidaste
          tu contraseña?</a>
      </div>
    </form>
  </p-card>
</main>
